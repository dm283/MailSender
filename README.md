# Mailsender

СЕРВИС АВТОМАТИЗАЦИИ ОТПРАВКИ E-MAIL СООБЩЕНИЙ

Файлом приложения является Mailsender-app.py. Возможна его компиляция в exe-файл.<br/>
Внешние python-библиотеки:  aiosmtplib, aioodbc.

1) В директорию с Mailsender-app.py добавляем файл config.ini, при необходимости настраиваем его (файл у разработчика приложения).

2) Возможны 2 варианта работы приложения с базой данных:</br>
   -  при использовании базы данных Microsoft SQL/PostgreSQL выполняем команды в файле create-database-*.sql (*=mssql/postgre), в config.ini устанавливаем is_mock_db=False, и соответствующие db, dsn, db_table.<br/>
   -  для работы с симулятором базы данных (локальный json-файл) устанавливаем is_mock_db = True в config.ini, файл с бд будет создан автоматически при запуске робота (Start robot).

3) Запускаем файл приложения.

Send test e-mail - тест отправки письма на техническую почту (адрес receiver_test_message в config.ini).<br/>
Start robot - стартует робота, периодически загружающего новые записи из базы данных и отправляющего сообщения (период check_db_period в config.ini).<br/>
Stop robot - останавливает робота (данная функция в разработке).

После отправки e-mail, в базу данных пишется дата и время отправки, в лог-файл пишутся отправки по каждому адресу.

Для тестирования отправки новых сообщений добавляем записи в базу данных или в файл mock-db.json с handling_date = null.